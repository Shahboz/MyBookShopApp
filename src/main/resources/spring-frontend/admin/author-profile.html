<!--
=========================================================
* Material Dashboard 2 - v3.0.4
=========================================================
* Product Page: https://www.creative-tim.com/product/material-dashboard
* Copyright 2022 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)
* Coded by Creative Tim
=========================================================
* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/admin/head_fragment :: headFragment}"></head>

<body class="g-sidenav-show  bg-gray-200">
  <aside th:replace="~{fragments/admin/menubar_fragment :: menubarFragment('authors')}"></aside>
  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <!-- Navbar -->
    <nav th:replace="~{fragments/admin/navbar_fragment :: navbarFragment('Book')}"></nav>
    <!-- End Navbar -->
    <div class="container-fluid py-4">
      <div class="row">
        <div class="col-lg-8 mt-lg-0 mt-4">
          <div class="card card-body" id="profile">
            <div class="row justify-content-start align-items-center">
              <div class="col-sm-auto col-4">
                <div class="avatar avatar-xl position-relative">
                  <img th:src="${authorDto.getPhoto()}" alt="bruce" class="w-100 rounded-circle shadow-sm">
                </div>
              </div>
              <div class="col-sm-auto col-8 my-auto">
                <div class="h-100">
                  <h5 class="mb-1 font-weight-bolder" th:text="${authorDto.getName()}">Richard Davis</h5>
                </div>
              </div>
            </div>
          </div>
          <div class="card mt-4" id="basic-info">
              <div class="card-header">
                <h5>Profile Information</h5>
              </div>
              <div class="card-body pt-0">
                <form method="post" th:action="@{/admin/author/edit}" th:object="${authorDto}">
                  <input type="hidden" placeholder="Author slug" th:field="*{slug}">
                  <div class="input-group input-group-static is-valid">
                    <label>Name</label>
                    <input type="text" class="form-control" placeholder="Author name" th:field="*{name}" required>
                  </div>
                  <div class="row mt-4">
                    <div class="col">
                      <div class="input-group input-group-dynamic is-valid">
                        <textarea class="form-control" rows="18" placeholder="Biography of author" spellcheck="false" th:field="*{description}" required>Description</textarea>
                      </div>
                    </div>
                  </div>
                  <button type="submit" class="col-lg-6 btn btn-block bg-gradient-success btn-sm float-end mt-6">
                    <i class="material-icons text-sm">save</i>&nbsp;Save</button>
                </form>
              </div>
          </div>
        </div>
        <div class="col">
          <div class="card h-100">
            <div class="card-header pb-0 p-3">
              <div class="col-lg-6 d-flex align-items-center">
                <h6 class="mb-0">List of Books</h6>
              </div>
            </div>
            <div class="card-body p-3 pb-0">
              <table class="table align-items-center mb-0">
                <tbody>
                  <tr th:each="authorBook, iStat : ${authorBooks}" th:if="${iStat.index} < 15">
                    <th scope="row" class="align-middle text-start" th:text="${iStat.index + 1}">1</th>
                    <td class="align-middle text-start"
                        th:text="${#strings.length(authorBook.getTitle())} > 20 ? ${#strings.substring(authorBook.getTitle(), 0, 20)} + '...' : ${authorBook.getTitle()}">Mark</td>
                    <td class="align-middle text-start" th:text="'₽&nbsp;' + ${#numbers.formatInteger(authorBook.getPrice(), 0, 'WHITESPACE')}">Otto</td>
                    <td class="align-middle text-start" th:text="'₽&nbsp;' + ${#numbers.formatInteger(authorBook.getDiscountPrice(), 0, 'WHITESPACE')}">Otto</td>
                  </tr>
                </tbody>
              </table>
              <nav aria-label="Page navigation example" th:if="${countPage} > 1">
                <ul class="pagination justify-content-center" id="pagination">
                  <li id="pageItemPrev" th:class="${activePage < 3} ? 'page-item disabled' : 'page-item'">
                    <a class="page-link" href="javascript:prevPageClick();" tabindex="-1">
                      <span class="material-icons">keyboard_arrow_left</span>
                      <span class="sr-only">Previous</span>
                    </a>
                  </li>
                  <li th:each="i : ${#numbers.sequence(1, countPage)}"
                      th:class="'page-item' + (${i == activePage} ? ' active' :
                          (${T(Math).abs(i - activePage) == 1 or (activePage == 1 and i - activePage == 2) or (activePage == countPage and countPage - i == 2)} ? '' : ' visually-hidden'))">
                    <a class="page-link" th:href="'/admin/author/' + ${authorDto.getSlug()} + '?page=' + ${i}" th:text="${i}">1</a>
                  </li>
                  <li id="pageItemNext" th:class="${countPage - activePage} < 2 ? 'page-item disabled' : 'page-item'" th:attr="data-max=${countPage}">
                    <a class="page-link" href="javascript:nextPageClick();" tabindex="0">
                      <span class="material-icons">keyboard_arrow_right</span>
                      <span class="sr-only">Next</span>
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
      <footer th:replace="~{fragments/admin/footer_fragment :: footerFragment}"></footer>
    </div>
  </main>
  <div th:replace="~{fragments/admin/configurator :: configuratorFragment}"></div>
  <th:block th:replace="~{fragments/admin/scripts :: scriptFragment}"></th:block>
</body>

</html>